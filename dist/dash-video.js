!function(e,t){"use strict";"function"==typeof define&&define.amd?define("bower/ee-class/dist/ee-class.min",[],t):"object"==typeof module&&"object"==typeof module.exports?module.exports=t():("object"!=typeof e.ee&&(e.ee={}),e.ee.Class=t())}(this,function(){"use strict";var e,t,n;return e=function(e,n,r,i){n["super"]=function(){var t,r,i;if(n.___super){for(t=[],r=0,i=arguments.length;i>r;r++)t.push(arguments[r]);return n.___super.apply(this,t)}throw new Error("The method «"+e+"» has no super «"+e+"» method on any protoype!")},n.local||Object.defineProperty(n,"local",{value:i}),r&&r.prototype&&t(e,n,r.prototype,i)},t=function(e,n,r,i){n.local||Object.defineProperty(n,"local",{value:i}),r&&(Object.hasOwnProperty.call(r,e)?Object.defineProperty(n,"___super",{value:r[e]}):r.___isEeClass||"init"!==e||"object"!=typeof r||"function"!=typeof r.constructor?t(e,n,"object"==typeof r?Object.getPrototypeOf(r):null,i):Object.defineProperty(n,"___super",{value:r.constructor}))},n=function(t){var i,s={};return this instanceof n?(t.inherits&&t.inherits.___properties&&(s=t.inherits.___properties),Object.keys(t).forEach(function(n){var r=t[n];"inherits"!==n&&("function"==typeof r?(s[n]={value:r,enumerable:"_"!==n[0]},s[n].value.displayName||Object.defineProperty(s[n].value,"displayName",{value:n}),e(n,r,t.inherits,t)):"object"==typeof r&&"[object Object]"===Object.prototype.toString.call(r)?Object.hasOwnProperty.call(r,"get")||Object.hasOwnProperty.call(r,"value")||Object.hasOwnProperty.call(r,"set")?Object.keys(r).some(function(e){return-1===["get","set","value","enumerable","writable","configurable"].indexOf(e)})?s[n]=s[n]={value:r,enumerable:!0,writable:!0}:(s[n]=r,"function"==typeof r.value&&(e(n,r.value,t.inherits,t),r.value.displayName||Object.defineProperty(r.value,"displayName",{value:n}))):s[n]=s[n]={value:r,enumerable:!0,writable:!0}:s[n]={value:r,enumerable:!0,writable:!0})}),"function"==typeof Symbol&&Symbol.iterator in t&&(s[Symbol.iterator]={value:t[Symbol.iterator],writable:!0}),i=function(){var e,n,r,s=[];if(this instanceof i){for(n=0,r=arguments.length;r>n;n++)s.push(arguments[n]);return this.init?e=this.init.apply(this,s):"function"==typeof t.inherits&&t.inherits.apply(this,s),"undefined"!=typeof e?e:void 0}throw new Error("the class constructor was called without the «new» keyword!")},i.prototype=Object.create(t.inherits?t.inherits.prototype?t.inherits.prototype:t.inherits:{},s),Object.defineProperty(i.prototype,"___isEeClass",{value:!0}),i):Object.create(n,{value:{value:t,enumerable:!0}})},n.Enumerable=function(){return Object.defineProperty(this,"enumerable",{value:!0,enumerable:!0}),this},n.Configurable=function(){return Object.defineProperty(this,"configurable",{value:!0,enumerable:!0}),this},n.Writable=function(){return Object.defineProperty(this,"writable",{value:!0,enumerable:!0}),this},n.proto=function(e){return"object"==typeof e?Object.getPrototypeOf(e):void 0},n.keys=function(e){var t=[];for(var n in e)t.push(n);return t},n.define=function(e,t,n){Object.defineProperty(e,t,n)},n.implement=function(e,t){return n.keys(e).forEach(function(n){t[n]=e[n]}),t},n.inspect=function(e,t){return t=t||{},Object.getOwnPropertyNames(e).sort().forEach(function(n){"function"==typeof e[n]?t[n]=function(){}:"___isEeClass"!==n&&(t[n]=e[n])}),Object.getPrototypeOf(e)&&(t["super"]={},n.inspect(Object.getPrototypeOf(e),t["super"])),t},n}),function(){"use strict";requirejs(["bower/ee-class/dist/ee-class.min"],function(e){var t;t=new e({inherits:HTMLElement.prototype,isCrapple:!1,ready:!1,playing:{get:function(){return this.video?!this.video.paused:this.crapplePlayer?this.crapplePlayer.playing:!1}},createdCallback:function(){var e=[];this.loadedSources=[],this.isCrapple=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,this.sRoot=this.createShadowRoot(),this.createRoot(),this.prepareSources(),this.hasAttribute("controls")&&this.createControls(),this.hasAttribute("poster")&&this.createPoster(),this.isCrapple&&(e.push("../lib/CrapplePlayer.js"),e.push("../lib/Stream.js")),this.dashSource&&e.push("../lib/shaka-player.compiled.js"),requirejs(e,function(){var e=[];for(var t=0,n=arguments.length;t<n;t++)e.push(arguments[t]);try{this.isCrapple?this.createCrapplePlayer.apply(this,e):this.createPlayer.apply(this,e)}catch(r){console.log(r,r.stack)}this.loaded=!0}.bind(this))},play:function(){this.video?this.video.play():this.crapplePlayer&&this.crapplePlayer.play()},pause:function(){this.video?this.video.pause():this.crapplePlayer&&this.crapplePlayer.pause()},createCrapplePlayer:function(e,t){this.crapplePlayer=new e({stream:new t(this.crappleSource),useWorkers:!1,webgl:"auto",render:!0,loop:this.hasAttribute("loop"),size:{width:this.root.offsetWidth,height:this.root.offsetHeight}}),this.crappleVideo=this.crapplePlayer.canvas,this.crappleVideo.setAttribute("width",this.root.offsetWidth),this.crappleVideo.setAttribute("height",this.root.offsetHeight),this.root.appendChild(this.crappleVideo),this.crapplePlayer.onStatisticsUpdated=function(e){},this.hasAttribute("autoplay")&&this.play()},createPlayer:function(e){this.loadedSources.length===0?this.log("No video sources! check the sources and their media queries!"):(this.video=document.createElement("video"),this.video.setAttribute("width",this.root.offsetWidth),this.video.setAttribute("height",this.root.offsetHeight),this.getAttribute("controls")&&this.video.setAttribute("controls"),this.getAttribute("loop")&&this.video.setAttribute("loop"),e&&e.polyfill.installAll(),this.dashSource&&e&&e.player.Player.isBrowserSupported()&&e.player.Player.isTypeSupported('video/webm; codecs="vp9, vorbis"')?(this.dashPlayer=new e.player.Player(this.video),window.shakaEstimator||(window.shakaEstimator=new e.util.EWMABandwidthEstimator),this.dashPlayer.load(new e.player.DashVideoSource(this.dashSource,null,window.shakaEstimator)).then(function(){this.root.appendChild(this.video),this.hasAttribute("autoplay")&&this.play()}.bind(this)).catch(function(e){this.dashSource=null,this.createPlayer()}.bind(this))):(this.loadedSources.forEach(function(e){if(e.type!=="application/dash+xml"){var t=document.createElement("source");t.setAttribute("type",e.type),t.setAttribute("src",e.src),this.video.appendChild(t)}}.bind(this)),this.root.appendChild(this.video),this.hasAttribute("autoplay")&&this.play()))},prepareSources:function(){Array.prototype.forEach.call(this.children,function(e){e.media&&window.matchMedia?window.matchMedia(e.media)&&window.matchMedia(e.media).matches&&(e.type==="application/dash+xml"?this.dashSource=e.src:e.type==="video/mp4"&&e.hasAttribute("data-crapple")?this.crappleSource=e.src:this.loadedSources.push({src:e.src,media:e.media,type:e.type})):e.type==="application/dash+xml"?this.dashSource=e.src:e.type==="video/mp4"&&e.hasAttribute("data-crapple")?this.crappleSource=e.src:this.loadedSources.push({src:e.src,media:null,type:e.type})}.bind(this))},createControls:function(){return},createPoster:function(){},createRoot:function(){this.root=document.createElement("div"),this.root.addEventListener("click",function(){this.playing?this.pause():this.play()}.bind(this)),this.root.setAttribute("style",this.getAttribute("style")),this.hasAttribute("width")&&(this.root.style.width=this.getAttribute("width")),this.hasAttribute("height")&&(this.root.style.height=this.getAttribute("height")),this.sRoot.appendChild(this.root),this.elementHeight=this.root.offsetHeight,this.elementWidth=this.root.offsetWidth},log:function(){var e=["dash-video: "];for(var t=0,n=arguments.length;t<n;t++)e.push(arguments[t]);console.log.apply(console,e)}}),document.registerElement("dash-video",{prototype:new t})})}(),define("dash-video.js",function(){});